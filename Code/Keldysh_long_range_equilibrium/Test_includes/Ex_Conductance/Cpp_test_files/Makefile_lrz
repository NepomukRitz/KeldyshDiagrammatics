SHELL = /bin/bash

PATH_TO_LIB=$(HOME)/Code/lib_without_matlab
PATH_TO_INCLUDE=$(HOME)/Code/Keldysh_long_range_equilibrium/Includes

CC    = mpicxx #vtcxx #g++ -3.4 # gcc g++ g++-3.4
#CC    = icpc #vtcxx #g++ -3.4 # gcc g++ g++-3.4
#CC    = g++ #vtcxx #g++ -3.4 # gcc g++ g++-3.4
  
OPT   = -qopenmp -Wall -O3 -Qoption,cpp,--extended_float_types -std=c++11 #-O3 maybe use O2
#OPT   = -qopenmp -g -Wall -O0 -std=c++11  

I = -I. -I$(PATH_TO_INCLUDE) -I$(PATH_TO_LIB) $(GSL_INC) $(MKL_INC) 
L = -L. $(GSL_SHLIB) $(MKL_SHLIB)
#LINK = -Wl,-rpath=$(HOME)/lib64
LINK = -Wl,-rpath=/lrz/sys/libraries/gsl/2.3/lib:/lrz/sys/intel/studio2017_u6/compilers_and_libraries_2017.6.256/linux/mkl/lib/intel64

LIB  = -lm  -lgslcblas $(GSL_BLAS_SHLIB)
#LIB  = -lmx -lm -lmat -lmex -lmyppmd -lmwlapack -lmwblas $(GSL_BLAS_SHLIB)

%:  %.cpp
	$(CC) $(OPT) -o $@ $@.cpp $(PATH_TO_LIB)/matrix.cpp $(PATH_TO_LIB)/blnla.cpp $(PATH_TO_LIB)/physicalpp.cpp $(PATH_TO_LIB)/approxxpp.cpp $(PATH_TO_LIB)/ozaki.cpp $(PATH_TO_LIB)/patterson_set.cpp $(PATH_TO_LIB)/basic.cpp $(I) $(L) $(LIB) $(LINK) 
	mv $@ ~/bin
    

# -------------------------------------------------------------------------- #

